{% comment %}
  Custom Landing Page Section
  Complete control for custom HTML, CSS, and JavaScript
  
  BRE Wordmark:
  Futura Condensed Medium (stroked in black)
  Y FACTOR Wordmark:
  Futura Bold (stroked in red)
  DIN Condensed
  MISC
  Avenir

  WORDMARK COLORS:
  Orange: ff6e04
  Red: dc200d
  Bright red stroke for Y Factor: f20909
  Small copy on Y-FACTOR label: Orange: e46204

  ROOSTER COLORS:
  Orange Rays: f89d1c
  Red Rays: e54f21
  Light Orange for circle: ffaf03
  Rooster red: d61f27
  BACKGROUND BLUE: 112ac0
  04204A DARK
  O44FC4 MEDIUM
  206CD5 LIGHT
{% endcomment %}

<!-- Load Swiper Assets Once for All Components -->
{% render 'swiper-assets', load_once: true %}

<!-- Loading Overlay -->
<div id="loadingOverlay" class="loading-overlay">
  <div class="loading-content">
    <div class="loading-logo">
      <img src="{{ 'logo-roster-clean.png' | asset_url }}" alt="Big Richard Energy Logo" width="120" height="120">
    </div>
    <div class="loading-text">
      <h2>BIG RICHARD ENERGY</h2>
      <div class="loading-spinner"></div>
    </div>
  </div>
</div>

<!-- Progress Bar -->
<div class="progress-bar">
  <div class="progress-bar-fill" id="progressBarFill"></div>
</div>

<!-- Section Navigation -->
<div class="section-nav" id="sectionNav">
  <div class="nav-dot" data-section="hero" title="Hero"></div>
  <div class="nav-dot" data-section="features" title="Features"></div>
  <div class="nav-dot" data-section="icons" title="Trusted By"></div>
  <div class="nav-dot" data-section="the-y" title="The Y"></div>
  <div class="nav-dot" data-section="testimonials" title="Testimonials"></div>
  <div class="nav-dot" data-section="video" title="Video"></div>
  <div class="nav-dot" data-section="form" title="Sign Up"></div>
</div>

<section id="{{ section.id }}" class="custom-landing-page">
  {% if section.settings.custom_html != blank %}
    {{ section.settings.custom_html }}
  {% else %}
    
    <!-- Hero Section -->
    <div class="hero-section" id="hero">
      
      <div class="hero-background">
        <img src="{{ 'hero_bg_main.jpg' | asset_url }}" alt="Hero Background" width="1920" height="1080">
      </div>

      <div class="hero-bottle-overlay">
        <img src="{{ 'bottle.png' | asset_url }}" alt="Bottle" width="300" height="600">
      </div>

      <div class="hero-content">
        <h1 class="hero-heading">
          SOMETHING <span class="hero-highlight">BIG</span> IS COMING!
        </h1>
      </div>

    </div>

    <!-- Two Column Features Section -->
    <div class="features-section" id="features">

      <div class="scroll-button-container">
        <div class="scroll-button" id="scrollToFormButton">
          <div class="scroll-button-content">
            <div class="rooster-logo">
              <img src="{{ 'logo-roster-clean.png' | asset_url }}" alt="Rooster Logo" width="40" height="40">
            </div>
            <div class="scroll-text">
              <span class="scroll-label">FIND YOUR Y</span>
              <span class="scroll-arrow">â†“</span>
            </div>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="two-column-layout">
          
          <!-- Left Column -->
          <div class="column column--left">
            <h2 class="features-heading">SIMPLY THE BEST:</h2>
            <p class="features-description">Clinically proven to:</p>
            <ul class="features-list">
              <li>Increase Free and Total Testosterone</li>
              <li>Boost Nitric Oxide levels up to 230% over baseline levels</li>
            </ul>
            <a href="#" class="features-button" id="featuresScrollButton">FIND YOUR Y</a>
            <p class="features-tagline">
              <img src="{{ 'logo-roster-clean.png' | asset_url }}" alt="Big Richard Energy Logo" width="120" height="120">
              GIVE LOW ENERGY THE BIRD!
            </p>
          </div>
          
          <!-- Right Column -->
          <div class="column column--right">
            <h2 class="features-heading">BIG IS BETTER:</h2>
            <ul class="features-list">
              <li>Gain lean muscle and lose body fat</li>
              <li>Stay energized and motivated through the day</li>
              <li>Ignite sexual vitality and drive</li>
              <li>Increase confidence and mood</li>
              <li>Better focus and clarity</li>
              <li>Less feelings of fatigue and depression</li>
            </ul>
            <h3 class="arrival-title">Arriving Fall 2025</h3>
          </div>
          
        </div>

        <!-- Trust Badges -->
        <div class="trust-badges">
          <div class="trust-badge">
            <div class="trust-badge-title">Clinically Tested</div>
            <div class="trust-badge-text">Ingredients</div>
          </div>
          <div class="trust-badge">
            <div class="trust-badge-title">Vegan Time-Release</div>
            <div class="trust-badge-text">Capsules</div>
          </div>
          
          <!-- Label Image Separator -->
          <div class="label-separator">
            <img src="{{ 'label.jpg' | asset_url }}" alt="Product Label" class="label-image" width="200" height="200">
          </div>
          
          <div class="trust-badge">
            <div class="trust-badge-title">100% Organic Formula</div>
            <div class="trust-badge-text">No Artificial Additives</div>
          </div>
          <div class="trust-badge">
            <div class="trust-badge-title">Manufactured in</div>
            <div class="trust-badge-text">FDA Registered Facility</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scrolling Icon Banner -->
    <div id="icons">
      {% render 'scrolling-icons-banner',
           background_color: '#f8f9fa',
           section_title: 'TRUSTED BY THE BEST',
           show_title: false,
           icon_size: 'large',
           scroll_speed: 30
        %}
    </div>

    <!-- The Y Section -->
    <div id="the-y">
      {% render 'the-y-section' %}
    </div>

    <!-- Testimonials Section -->
    <div id="testimonials">
      {% render 'testimonials-section',
           background_image: 'orange_bg.jpg',
           section_title: 'TESTIMONIALS',
           rooster_icon: 'logo-roster-clean.png',
           show_navigation: true,
           autoplay_delay: 5000
         %}
    </div>

    <!-- Video Section -->
    <div class="video-section" id="video" style="background-image: url('{{ 'bg_blue.jpg' | asset_url }}');">
      <img src="{{ 'video_title.png' | asset_url }}" alt="Watch The Power" class="video-title-image" width="400" height="80">
      <div class="video-container">
        <iframe 
            src="https://www.youtube.com/embed/_T2eF3-Chy4?rel=0&modestbranding=1" 
            title="YouTube video player" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
            allowfullscreen>
        </iframe>
      </div>
    </div>

    <!-- Form Section -->
    <div id="form">
      {% render 'klaviyo-form-section',
        klaviyo_form_id: 'RLVSkF',
        klaviyo_company_id: 'XTbFQw'
      %}
    </div>
    
    
  {% endif %}
</section>

{{ 'custom-landing-page.css' | asset_url | stylesheet_tag }}

{% if section.settings.custom_css != blank %}
  <style>
    {{ section.settings.custom_css }}
  </style>
{% endif %}

{% if section.settings.custom_js != blank %}
  <script>
    {{ section.settings.custom_js }}
  </script>
{% endif %}

<script>
  // Loading overlay functionality
  document.addEventListener('DOMContentLoaded', function() {
    const loadingOverlay = document.getElementById('loadingOverlay');
    
    // Hide loading overlay after 2 seconds
    setTimeout(function() {
      if (loadingOverlay) {
        loadingOverlay.classList.add('fade-out');
        // Remove from DOM after fade animation completes
        setTimeout(function() {
          loadingOverlay.remove();
        }, 500); // Match the CSS transition duration
      }
    }, 1000);
  });

  // Scroll button functionality
  document.addEventListener('DOMContentLoaded', function() {
    const scrollButton = document.getElementById('scrollToFormButton');
    const featuresScrollButton = document.getElementById('featuresScrollButton');
    const formSection = document.querySelector('.form-section');
    
    if (!formSection) return;
    
    // Scroll to form when scroll button is clicked
    if (scrollButton) {
      scrollButton.addEventListener('click', function(e) {
        e.preventDefault();
        formSection.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      });
    }
    
    // Scroll to form when features button is clicked
    if (featuresScrollButton) {
      featuresScrollButton.addEventListener('click', function(e) {
        e.preventDefault();
        formSection.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      });
    }
  });

  // Hero parallax effect
  document.addEventListener('DOMContentLoaded', function() {
    const heroBackground = document.querySelector('.hero-background');
    
    if (heroBackground) {
      let ticking = false;
      
      function updateParallax() {
        const scrolled = window.pageYOffset;
        const parallax = scrolled * 0.5; // Adjust speed (0.5 = half speed)
        
        heroBackground.style.transform = `translate3d(0, ${parallax}px, 0)`;
        ticking = false;
      }
      
      function requestTick() {
        if (!ticking) {
          requestAnimationFrame(updateParallax);
          ticking = true;
        }
      }
      
      window.addEventListener('scroll', requestTick, { passive: true });
    }
  });

  // Progress bar and section navigation
  document.addEventListener('DOMContentLoaded', function() {
    const progressBarFill = document.getElementById('progressBarFill');
    const sectionNav = document.getElementById('sectionNav');
    const navDots = document.querySelectorAll('.nav-dot');
    const sections = ['hero', 'features', 'icons', 'the-y', 'testimonials', 'video', 'form'];
    
    let ticking = false;
    
    function updateProgress() {
      const scrollTop = window.pageYOffset;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const scrollPercent = (scrollTop / docHeight) * 100;
      
      if (progressBarFill) {
        progressBarFill.style.width = scrollPercent + '%';
      }
      
      // Update active section
      let activeSection = 'hero';
      for (let i = sections.length - 1; i >= 0; i--) {
        const section = document.getElementById(sections[i]);
        if (section) {
          const rect = section.getBoundingClientRect();
          if (rect.top <= window.innerHeight / 2) {
            activeSection = sections[i];
            break;
          }
        }
      }
      
      // Update nav dots
      navDots.forEach(dot => {
        dot.classList.remove('active');
        if (dot.getAttribute('data-section') === activeSection) {
          dot.classList.add('active');
        }
      });
      
      ticking = false;
    }
    
    function requestProgressTick() {
      if (!ticking) {
        requestAnimationFrame(updateProgress);
        ticking = true;
      }
    }
    
    window.addEventListener('scroll', requestProgressTick, { passive: true });
    
    // Nav dot click handlers
    navDots.forEach(dot => {
      dot.addEventListener('click', function() {
        const sectionId = this.getAttribute('data-section');
        const section = document.getElementById(sectionId);
        if (section) {
          section.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
    
    // Initial update
    updateProgress();
  });
</script>

{% schema %}
{
  "name": "Custom Landing Page",
  "tag": "section",
  "class": "custom-landing-page",
  "settings": [
    {
      "type": "header",
      "content": "Custom HTML"
    },
    {
      "type": "liquid",
      "id": "custom_html",
      "label": "Custom HTML",
      "info": "Write your complete HTML structure here. You can use Liquid variables and Shopify objects."
    },
    {
      "type": "header",
      "content": "Custom CSS"
    },
    {
      "type": "textarea",
      "id": "custom_css",
      "label": "Custom CSS",
      "info": "Write your CSS styles here. No <style> tags needed."
    },
    {
      "type": "header",
      "content": "Custom JavaScript"
    },
    {
      "type": "textarea",
      "id": "custom_js",
      "label": "Custom JavaScript",
      "info": "Write your JavaScript here. No <script> tags needed."
    }
  ],
  "presets": [
    {
      "name": "Custom Landing Page",
      "category": "Custom Sections"
    }
  ]
}
{% endschema %}
